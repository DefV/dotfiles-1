# create a dir and cd into it
newdir() {
	# show usage if there are no arguments
	if (( $# == 0 ))
	then
		echo usage: newdir folder
	else
		mkdir -p $1
		cd $1
	fi
}

# open a project
openproject() {
	# show usage if there are no arguments
	if (( $# < 1 ))
	then
		echo usage: openproject projectname
	else
		# find a directory that contains the phpstorm-preferences
		IDEA_PATH=$(find  ~/Sites/*/$1/.idea -type d -name .idea)
		# @todo	errorhandling for non existing projects
		cd IDEA_PATH/..
		open IDEA_PATH/..
		pstorm IDEA_PATH/..
	fi
}

findproject() {
	compadd `ls -l ~/Sites/*/ | awk '{ print $9 }'`
}

alias p="openproject"
compdef findproject openproject